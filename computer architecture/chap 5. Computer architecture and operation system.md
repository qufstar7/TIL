# The secret life of programming 
 **Chapter 5. Computer architecture and operation system**

- How the computer systematically manages program and memory
    - 컴퓨터 아키텍처
    - 메모리와 관련한 구조개선
    - 멀티태스킹
    - 운영체제

*** 
***
## **1. 기본적인 구조 요소들**
    * 가장 흔한 컴퓨터 구조(2)
        1. **폰 노이만 구조**
        2. **하버드 구조**
            * 두 구조의 차이 : 메모리 배열

### **1-1. precess core**
폰 노이만 구조, 하버드 구조 모두 CPU 1개
- **멀티프로세서(multiprocessor)**
  - 단일 CPU의 한계를 벗어나기 위한 방법
  - 문제 : **병렬화(parallelized)** - 여러 CPU를 활용할 수 있도록 프로그램을 병렬화하는 문제
    -  cf) 초기 워크스테이션(초기 X윈도우 시스템)  
- **전력 장벽**
  - (2000년경)반도체 회로 크기가 줄어들면서 비용도 낮아지고 성능도 개선 하지만 전력을 더 많이 소모해 단위 면적당 열 방생은 더 많아짐.
  - 열로 인해 회로를 이루는 물질의 녹는점 이상으로 온도가 올라가는 것을 방지하면서 회로가 소형화 고성능화하기 어려워짐
- **프로세스 코어**
  - CPU : process core 
- ****멀티코어**
  - 코어가 여럿 들어가는 multicore processor가 이제 일반적
  - 심지어 멀티코어가 여러개 들어간 시스템도 있다.(데이터 센터 등)

### **1-2. 마이크로프로세서와 마이크로컴퓨터**
메모리와 I/O가 프로세서 코어와 같은 패키지에 들어 있지 않으면 **마이크로프로세서**.
모든 요소를 한 칩 안에 패키징하면 **마이크로컴퓨터**
마이크로컴퓨터가 가리키는 대상을 **마이크로컨트롤러**라고도 한다.
마이크로프로세서를 중심으로 만들어진 컴퓨터 시스템을 마이크로컴퓨터라고도 한다.(의미 모호하게 쓰인다.)
- 아두이노
    - 아트멜 AVR 마이크로컴퓨터 칩을 기반으로 만들어진 하버드 구조의 컴퓨터
    - 오픈 소스를 기반으로 한 단일 보드 마이크로컨트롤러로 완성된 보드(상품)와 관련 개발 도구 및 환경
    - [아두이노 깃헙 저장소](https://github.com/arduino/Arduino)
- 마이크로컴퓨터
    - 식기세척기 등에서 쓰이는 작은 컴퓨터
- 마이크로프로세서
    - 큰 시스템에 들어가는 부품으로 주로 쓰인다.
  - **단일 칩 시스템 (SoC, System on a Chip)** : 더 복잡한 마이크로컴퓨터
  - WiFi 회로 등의 더 복잡한 장치가 들어있다
  - 핸드폰 등의 장치에 SoC내재
  - 원하는 대로 커스터마이즈가 가능한 FPGA(field programmable gate array)를 제공하는 SoC도 있다.


***
## **2. 프로시저, 서브루틴, 함수**
코드 반복을 피하는 이유
    - 메모리 덜 차지
    - 버그 수정 시 한 번에 수정
- **함수**
    - =  프로시저 = 서브루틴 (언어에 따라 부르는 이름이 다르다)
    - 코드를 재사용하는 주요 수단
    - 자바스크립트 함수 예제) 'cube'함수
        ```javascript
        function 
        cube(x)
        {
            return (x * x * x);
        }
        ```
    - x라는 이름으로 파라미터값을 받고 세제곱을 반환
    - 자바스크립트 함수 호출 예제)
        ```javascript
        y = cube(3);
        ```
    - cube를 여러번 작성하지 않아도 여러 번 호출할 수 있다.
      - 코드의 작동원리
        - 함수를 호출하는 부분에서 함수를 실행하고 다시 원래 자리로 돌아올 방법 - 위치 : 프로그램 카운터의 값
      - 명령어 집합을 활용해 함수를 호출하는 방법
     
      주소 | 명령어 | 피연산자 | 설명
      ---|---|---|---
      100|pca||프로그램 카운터 > 누산기
      101|add|5(즉시)|함수에서 돌아올 주소(100 + 5 = 105)
      102|store|200(직접)|돌아올 주소를 메모리(200번지)에 저장
      103|load|3(즉시)|세제곱할 값(함수의 파라미터값)을 누산기에 넣기
      104|bra|300(직접)|cube함수를 호출(분기)
      105|||함수에서 돌아온 뒤에 실행될 부분
      ...|||
      200|||함수에서 돌아올 주소를 저장하기 위해 미리 확보해둔 메모리 위치
      ...|||
      300|||cube 함수 시작부분
      ...|||cube 함수의 나머지 명령어들
      310|bra|200(간접)|저장했던 주소로 돌아감(간접 주소 지정을 사용해 분기)
       
       - 반환 주소는 프로그램 시작으로부터 5개의 명령어가 지난 다음 > 200번지에 넣는다 > 함수 호출 > 함수 실행 > 200번지 값 사용해 간접 분기(105번지)
       - 상당히 많은 작업 필요 - 대부분의 기계는 이런 과정을 돕는 명령어를 제공
       -  EX) ARM 프로세서 - **'링크 레지스터를 사용해 분기'** 명령어(함수로 호출 명령어 + 다음 위치 저장 명령어)


***
## **3. 스택**
단순하지 않은 함수 - 다른 함수 호출, 자기 자신 호출
- **재귀(recursion)**
    - ex) JPEG(Joint Photographic Experts Group)를 사용한 사진 크기 감소(이미지 압축)
    - **재귀적 분할**을 사용해 압축 : 부분 나누기, 부분 검사하기(1픽셀조각까지)
    - subdivide 함수(의사코드 : 우리말이나 영어등의 언어로 간결하게 적은 코드)
      - parameter : 정사각형의 왼쪽 아래 꼭짓점의 x 및 y 좌표와 크기
      - 왼쪽 아래, 왼쪽 위, 오른쪽 위, 오른쪽 아래 순서로 이미지를 색이 똑같은 정사각형 덩어리로 나눈다.
      - 64픽셀 > 분할완료 노드 40개 압축성공
    - **트리(tree)** : **유향 비순환 그래프(DAG) **
      - 화살표를 따라가며 읽는다
      - 화살표는 아래만 가리킨다(순환x)
      - **잎노드(leaf node)** : 화살표가 뻗어나가지 않는 부분. 트리의 맨 마지막
    - **쿼드 트리** - **공간 데이터 구조**에 속한다.
    - 재귀 함수 주의점
      - 최초 함수를 호출했던 자리로 돌아가기 위해 반환 주소를 여럿 저장할 수 있어야 한다.
      - 반환할 때 저장된 주소 중 어떤 주소를 사용할지 결정할 수 있어야 한다.
    - **깊이 우선 순회** : 아래로 가다 옆으로
    - **너비 우선 순회** : 옆으로 가다 아래로
- **스택** : 아래부터 쌓고(push) 위에서부터 꺼낸다.(pop) **LIFO구조(last in first out)**
    - **스택 오버플로** : 스택에 물건을 푸쉬하는데 더 이상 들어갈 공간이 없는 경우
    - **스택 언더플로** : 빈 스택에서 물건ㅇ르 가져오려고 하는 경우
    - 모든 함수는 자신이 전달받은 반환 주소를 나중에 사용하기 위해 스택에 넣을 수 있다.
    - 대부분의 컴퓨터 하드웨어는 스택을 지원 - **한계 레지스터(limit register)**
    - 단지 반환 주소만 저장하는 장소x
- **스택프레임** : 함수가 호출될 때마다 스택에 저장되는 데이터의 모음
    - 프로그램 속도 개선을 위해 지역변수를 지정해 여러번 사용.
    - 지역 변수값을 덮어쓰면 안되고, 스택에 저장한다.(각각의 함수 호출이 서로 독립적)
    - 각 함수 호출이 반환 주소와 지역 변수를 포함하는 새로운 스택프레임을 만든다
- 스택 기반 언어
    - forth 포스
    - PostScript 포스트 스크립트
    - 몇몇 언어와 옛날 HP 계산기 몇 가지
    - 한국어, 일본어
    - 요다의 언어 습관

```
### 여러 가지 수식 표기법

    1. 중위 표기법 
        - 연산자를 피연산자 사이에
        - 괄호사용해 계산 순서 지정
        ex) (1 + 2) X (3 + 4)

    2. 전위 표기법
        : 폴란드 표기법
        - 연산자를 피연산자보다 앞에
        - 괄호 필요 x
        ex) X + 1 2 + 3 4
    
    3. 역 폴란드 표기법(RPN)
        - 연산자를 피연산자 뒤에 
        ex) 12+ 34 + X
    
    * 스택을 사용하면 RPN을 쉽게 구현 - 피연산자는 스택에 푸쉬된다. 연산자는 피연산자를 스택에서 가져와 계산하고 결과를 스택에 넣는다.
        - HP RPN 계산기 
           ex)  1 ENTER 2 + 3 ENTER 4 + X
        - 포스트스크립트 언어
           ex)  1 2 add 3 4 add mul
```     


***
## **4. 인터럽트**



***
## **5. 상대 주소 지정**



***
## **6. 메모리 관리 장치**


***
## **7. 가상 메모리**


***
## **8. 시스템 공간과 사용자 공간**


***
## **9. 메모리 계층과 성능**




***
## **10. 코프로세서**




***
## **11. 메모리상의 데이터 배치**




***
## **12. 프로그램 실행**




***
## **13. 메모리 전력 소비**



***
## **chapter 5 정리**


  
><**Quotation**> 
description

[추가조사자료정리페이지](Extra%20search)

[한 권으로 읽는 컴퓨터 구조와 프로그래밍 - 조너선 스타인하트](https://books.google.co.kr/books/about/%ED%95%9C_%EA%B6%8C%EC%9C%BC%EB%A1%9C_%EC%9D%BD%EB%8A%94_%EC%BB%B4%ED%93%A8%ED%84%B0_%EA%B5%AC%EC%A1%B0%EC%99%80.html?id=dXxgzgEACAAJ&redir_esc=y)

![image/image%20of%20book%20front.png](image/image%20of%20book%20front.png) 